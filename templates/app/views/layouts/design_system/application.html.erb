<!DOCTYPE html>
<html class="h-full">
  <head>
    <title>Design System - <%= content_for(:title) || 'Component Library' %></title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="h-full bg-olive-50 dark:bg-olive-950">
    <div class="flex h-full">
      <!-- Sidebar -->
      <aside class="fixed inset-y-0 left-0 w-64 bg-olive-900 dark:bg-olive-950 border-r border-olive-800 overflow-y-auto">
        <div class="p-6">
          <h1 class="text-xl font-display font-bold text-olive-100">
            Design System
          </h1>
          <p class="mt-1 text-sm text-olive-400">Component Library</p>
        </div>

        <nav class="px-3 pb-6">
          <!-- Getting Started -->
          <div class="mb-6">
            <h3 class="px-3 mb-2 text-xs font-semibold text-olive-400 uppercase tracking-wider">
              Getting Started
            </h3>
            <ul class="space-y-1">
              <li>
                <%= link_to 'Overview',
                            design_system_root_path,
                            class: "block px-3 py-2 rounded-md text-sm text-olive-300 hover:bg-olive-800 hover:text-olive-100 #{current_page?(design_system_root_path) ? 'bg-olive-800 text-olive-100' : ''}" %>
              </li>
              <li>
                <%= link_to 'Colors',
                            design_system_colors_path,
                            class: "block px-3 py-2 rounded-md text-sm text-olive-300 hover:bg-olive-800 hover:text-olive-100 #{current_page?(design_system_colors_path) ? 'bg-olive-800 text-olive-100' : ''}" %>
              </li>
              <li>
                <%= link_to 'Typography',
                            design_system_typography_path,
                            class: "block px-3 py-2 rounded-md text-sm text-olive-300 hover:bg-olive-800 hover:text-olive-100 #{current_page?(design_system_typography_path) ? 'bg-olive-800 text-olive-100' : ''}" %>
              </li>
            </ul>
          </div>

          <!-- UI Components -->
          <div class="mb-6">
            <h3 class="px-3 mb-2 text-xs font-semibold text-olive-400 uppercase tracking-wider">
              UI Components
            </h3>
            <ul class="space-y-1">
              <% DesignSystem::ComponentsController::COMPONENT_REGISTRY.select { |_, c| c[:category] == 'UI' }.each do |key, component| %>
                <li>
                  <%= link_to component[:name],
                              design_system_component_path(name: key),
                              class: "block px-3 py-2 rounded-md text-sm text-olive-300 hover:bg-olive-800 hover:text-olive-100 #{params[:name] == key.to_s ? 'bg-olive-800 text-olive-100' : ''}" %>
                </li>
              <% end %>
            </ul>
          </div>

          <!-- Form Components -->
          <div class="mb-6">
            <h3 class="px-3 mb-2 text-xs font-semibold text-olive-400 uppercase tracking-wider">
              Form Components
            </h3>
            <ul class="space-y-1">
              <% DesignSystem::ComponentsController::COMPONENT_REGISTRY.select { |_, c| c[:category] == 'Form' }.each do |key, component| %>
                <li>
                  <%= link_to component[:name],
                              design_system_component_path(name: key),
                              class: "block px-3 py-2 rounded-md text-sm text-olive-300 hover:bg-olive-800 hover:text-olive-100 #{params[:name] == key.to_s ? 'bg-olive-800 text-olive-100' : ''}" %>
                </li>
              <% end %>
            </ul>
          </div>

          <!-- Layout Components -->
          <div>
            <h3 class="px-3 mb-2 text-xs font-semibold text-olive-400 uppercase tracking-wider">
              Layout Components
            </h3>
            <ul class="space-y-1">
              <% DesignSystem::ComponentsController::COMPONENT_REGISTRY.select { |_, c| c[:category] == 'Layout' }.each do |key, component| %>
                <li>
                  <%= link_to component[:name],
                              design_system_component_path(name: key),
                              class: "block px-3 py-2 rounded-md text-sm text-olive-300 hover:bg-olive-800 hover:text-olive-100 #{params[:name] == key.to_s ? 'bg-olive-800 text-olive-100' : ''}" %>
                </li>
              <% end %>
            </ul>
          </div>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="flex-1 ml-64 overflow-y-auto">
        <div class="max-w-5xl mx-auto px-8 py-12">
          <%= yield %>
        </div>
      </main>
    </div>
  </body>
</html>
